package com.fld.init.aop;import org.aspectj.lang.ProceedingJoinPoint;import org.aspectj.lang.annotation.Around;import org.aspectj.lang.annotation.Aspect;import org.springframework.stereotype.Component;import com.fld.framework.dto.api.ApiReq;import com.fld.framework.dto.api.ApiReqContent;import com.fld.init.framework.runtime.FullPathHolder;import com.fld.init.framework.util.LogUtils;/** * Biz参数整合 *  * @author * */@Aspect@Componentpublic class CtrlToBizParamAdvice {  @Around("execution (* com.fld.init.business.inf..*.*(..)) or execution (* com.fld.init.business.impl..*.*(..))")  public Object transmitParams(ProceedingJoinPoint jp) throws Throwable {    // 检查参数    try {      Object[] args = jp.getArgs();      if (null != args && args.length > 0) {        for (Object object : args) {          if (object instanceof ApiReq) {            ApiReqContent ar = ((ApiReq) object).getApiReqContent();            if (null == ar.getHeader()) {              ar.setHeader(FullPathHolder.getHeader());            }            if (null == ar.getDevice()) {              ar.setDevice(FullPathHolder.getDevice());            }            if (null == ar.getProxy()) {              ar.setProxy(FullPathHolder.getProxy());            }          }        }      }      return jp.proceed();    } catch (Throwable e1) {      LogUtils.error("CtrlToBizParamAdvice", e1);      throw e1;    }  }}